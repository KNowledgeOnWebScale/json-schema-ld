{
  "$schema": "http://json-schema.org/schema#",
  "$schemaVersion": "0.0.1",
  "modelTags": "GSMA",
  "$id": "https://smart-data-models.github.io/dataModel.Transportation/VehicleFault/schema.json",
  "title": "Smart Data models - Vehicle-Fault schema",
  "description": "This entity contains a harmonised description of a Vehicle Fault. This entity is primarily associated with the Automotive vertical segment but might also be relevant to Industry, Smart City, Agriculture and related IoT applications.",
  "type": "object",
  "allOf": [
    {
      "$ref": "https://smart-data-models.github.io/data-models/common-schema.json#/definitions/GSMA-Commons"
    },
    {
      "$ref": "https://smart-data-models.github.io/data-models/common-schema.json#/definitions/Location-Commons"
    },
    {
      "properties": {
        "type": {
          "type": "string",
          "description": "Property. NGSI Entity identifier. It has to be Vehicle-Type",
          "enum": [
            "VehicleFault"
          ]
        },
        "model": {
          "type": "string",
          "description": "Property. The vehicle model identifier."
        },
        "vehicleType": {
          "type": "string",
          "description": "Property. The vehicle type identifier."
        },
        "vehicle": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 256,
              "pattern": "^[\\w\\-\\.\\{\\}\\$\\+\\*\\[\\]`|~^@!,:\\\\]+$",
              "description": "Property. Identifier format of any NGSI entity"
            },
            {
              "type": "string",
              "format": "uri",
              "description": "Property. Identifier format of any NGSI entity"
            }
          ],
          "description": "Property. Unique identifier of the entity"
        }
      },
      "observedAt": {
        "type": "string",
        "format": "date-time",
        "description": "Property. Indicates the date/time the fault was detected or identified."
      },
      "eventType": {
        "type": "string",
        "description": "Property. The event type descriptor, a choice from an enumerated list. enum:'collision, emergency, harshAccel, harshDecel, auxBatteryWarn, milWarn'",
        "enum": ["collision", "emergency", "harshAccel", "harshDecel", "auxBatteryWarn", "milWarn"]
      },
      "processingType": {
        "type": "string",
        "description": "Property. Indicates how the fault was dealt with, e.g. **systemHandled**, or not present if the issue has not been resolved."
      },
      "resolvedAt": {
        "type": "string",
        "format": "date-time",
        "description": "Property. Indicates the date/time at which the issue was solved, or not present if the issue has not been resolved."
      },
      "dtCode": {
        "type": "string",
        "description": "Property. DTC or Diagnostic Trouble Codes are codes generated by the vehicles computer diagnostic system. These may be manufacturer, equipment or vehicle specific."
      },
      "faultLog": {
        "type": "string",
        "description": "Property. Free text that records information about the initial fault incident, ongoing updates and fault resolution. "
      }
    }
  ],
  "required": [
    "id",
    "type"
  ]
}